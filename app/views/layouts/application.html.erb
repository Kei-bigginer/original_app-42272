<!DOCTYPE html>
<html>
  <head>
    <title>day√óday.</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- ‚úÖ Bootstrap CSSÔºà„Éá„Ç∂„Ç§„É≥Áî®„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØÔºâ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- ‚úÖ Swiper CSSÔºà„Çπ„É©„Ç§„ÉÄ„ÉºÁî®„É©„Ç§„Éñ„É©„É™Ôºâ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <!-- ‚úÖ „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆCSSÔºàSCSS„ÅßÊõ∏„ÅÑ„Åü„Çπ„Çø„Ç§„É´„ÇÇ„Åì„Åì„Å´ÂèçÊò†„Åï„Çå„ÇãÔºâ -->
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbo-track': 'reload' %>

    <!-- ‚úÖ JavaScript„ÅÆ„É¢„Ç∏„É•„Éº„É´Ë™≠„ÅøËæº„ÅøÔºàimportmap„Å´„Çà„ÇãJSÁÆ°ÁêÜÔºâ -->
    <%= javascript_importmap_tags %>
  </head>


  <body class="<%= controller.controller_name %> <%= controller.action_name %> layout-bg">

    <!-- üö© „Éò„ÉÉ„ÉÄ„ÉºÔºö„Ç¢„Éó„É™ÂêçÔºã„Éè„É≥„Éê„Éº„Ç¨„ÉºÔºãÊ©üËÉΩ„Ç¢„Ç§„Ç≥„É≥ -->
    <header class="header">
      <div class="container d-flex justify-content-between align-items-center">
    
        <!-- üå± Â∑¶Ôºö„É≠„Ç¥„Å®„Çµ„Éñ„Çø„Ç§„Éà„É´ -->
        <div class="logo-group d-flex flex-column align-items-start">
          <h1 class="mb-0">
            <%= link_to 'day√óday.', root_path, class: 'navbar-brand text-dark text-decoration-none fw-bold' %>
          </h1>
          <small class="text-muted fs-6">„Åµ„Åü„Çä„ÅÆ‰ø°È†º„Çí„ÄÅ„ÇÑ„Åï„Åó„ÅèËÇ≤„Å¶„Çã„Ç¢„Éó„É™</small>
        </div>

        <!-- üåü Âè≥ÔºöÊ©üËÉΩ„Ç¢„Ç§„Ç≥„É≥Ôºà„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥Ôºâ -->
        <% if user_signed_in? && current_user.pair&.users&.count == 2 %>
          <div class="icon-nav d-flex gap-3">
            <%= link_to notes_path, class: "icon-button", data: { tooltip: "„Å≤„Å®„Åì„Å®‰∏ÄË¶ß" } do %> üìù <% end %>
            <%= link_to diaries_path, class: "icon-button", data: { tooltip: "Êó•Â∏∏„ÅÆÂÜôÁúü" } do %> üì∑ <% end %>
            <%= link_to moments_path, class: "icon-button", data: { tooltip: "„Éá„Éº„ÉàË®òÈå≤" } do %> üíë <% end %>
          </div>
        <% end %>

        <!-- üçî „Éè„É≥„Éê„Éº„Ç¨„ÉºÔºà„É≠„Ç∞„Ç¢„Ç¶„ÉàÔºâ -->
        <% if user_signed_in? %>
          <div class="dropdown">
            <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              ‚ò∞
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <%= link_to '„Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ', "#", class: "dropdown-item" %>
              </li>
              <li>
                <%= link_to '„É≠„Ç∞„Ç¢„Ç¶„Éà', destroy_user_session_path, method: :delete, data: { confirm: "„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åô„ÅãÔºü", turbo: false }, class: "dropdown-item" %>
              </li>
            </ul>
          </div>
        <% end %>
      </div>
    </header>

    <!-- üì¶ „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑË°®Á§∫È†òÂüü -->
    <main class="main">
      <div class="container">
        <%= yield %> <!-- ÂêÑ„Éö„Éº„Ç∏„ÅÆ‰∏≠Ë∫´„Åå„Åì„Åì„Å´ÂÖ•„Çã -->
      </div>
    </main>

    <!-- üìå „Éï„ÉÉ„Çø„ÉºÔºàÂÖ±ÈÄöÔºâ -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2025 day√óday. All rights reserved.</p>
      </div>
    </footer>

    <!-- ‚úÖ Bootstrap JSÔºàCDNÔºâ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ‚úÖ Swiper JSÔºàCDNÔºâ -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- ‚úÖ SwiperÂàùÊúüÂåñ„Çπ„ÇØ„É™„Éó„ÉàÔºà‰∏≠ÂøÉÂº∑Ë™øÔºãËá™Âãï„Çπ„ÇØ„É≠„Éº„É´Ôºâ -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const swiper = new Swiper(".mySwiper", {
          loop: true,
          slidesPerView: 3,
          spaceBetween: 10,
          centeredSlides: true,
          autoplay: {
            delay: 2000,
            disableOnInteraction: false
          },
          on: {
            slideChangeTransitionEnd: function () {
              const slides = document.querySelectorAll('.swiper-slide');
              slides.forEach((slide, index) => {
                slide.style.opacity = (index === this.realIndex + 1) ? '1' : '0.5';
              });
            }
          }
        });
      });
    </script>

  </body>
</html>
